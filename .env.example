# Asset Tracking Bot Configuration
# Copy this file to .env and fill in your values

# === REQUIRED: Core Services ===
TELEGRAM_BOT_TOKEN=123456789:your_bot_token_here
OWNER_TELEGRAM_ID=123456789

# === REQUIRED: Google Sheets ===
SHEETS_SERVICE_ACCOUNT_FILE=service_account.json
SPREADSHEET_ID=1ABCDefghIJklmnoPQRstuvwxyz1234567890
SPREADSHEET_ASSETS=assets
SPREADSHEET_GROUPS=groups

# === REQUIRED: TMS API ===
TMS_API_URL=https://api.yourtms.com
TMS_API_KEY=your_tms_api_key
TMS_API_HASH=your_tms_api_hash

# === REQUIRED: OpenRouteService ===
ORS_API_KEY=your_openrouteservice_api_key

# === Google Maps API (Optional - Fallback Geocoding) ===
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
GOOGLE_MAPS_TIMEOUT_SECS=5

# === QC Panel Integration (Optional) ===
QC_PANEL_SPREADSHEET_ID=your_qc_panel_sheet_id
QC_ACTIVE_TABS=BIDH S,BIDH D,CPWP S,CPWP D,SSOY,OTMV
RISK_MONITOR_DEL_STATUSES=TRANSIT,WILL BE LATE,RISKY
MGMT_CHAT_ID=-1234567890
QC_TEAM_CHAT_ID=-1234567890

# === Scheduling Configuration ===
GROUP_LOCATION_INTERVAL=3600  # 1 hour - visible updates to groups
LIVE_TRACKING_INTERVAL=300    # 5 minutes - silent data refresh
MAX_CONCURRENT_TELEGRAM_SENDS=12
SCHEDULER_JITTER_MAX_SECONDS=15

# === Risk Detection ===
ENABLE_RISK_MONITORING=true
RISK_CHECK_INTERVAL=300       # 5 minutes
MIN_STOP_DURATION_MINUTES=10
MAX_SPEED_THRESHOLD_MPH=2.0
ALERT_COOLDOWN_MINUTES=30

# === ETA & Alerting ===
ETA_GRACE_MINUTES=10
SEND_QC_LATE_ALERTS=true

# === Performance & Rate Limiting ===
TMS_REQUEST_DELAY=1.0
TMS_MAX_REQUESTS_PER_MINUTE=60
ORS_REQUEST_DELAY=0.5
ORS_MAX_REQUESTS_PER_MINUTE=120
MAX_RETRY_ATTEMPTS=3
RETRY_DELAY_SECONDS=5
RETRY_EXPONENTIAL_BACKOFF=true

# === Feature Flags ===
ENABLE_PM_TRACKING=true
ENABLE_GROUP_AUTO_UPDATES=true
ENABLE_LIVE_TRACKING=true
ENABLE_ROUTE_OPTIMIZATION=true
ENABLE_TRAFFIC_DATA=true
ENABLE_WEATHER_INTEGRATION=false
ENABLE_CACHING=true

# === Logging Configuration ===
LOG_LEVEL=INFO
LOG_FILE_MAX_MB=10
LOG_BACKUP_COUNT=5
ENABLE_DEBUG_LOGGING=false
LOG_TMS_REQUESTS=false
LOG_ORS_REQUESTS=false
LOG_USER_INTERACTIONS=true
LOG_JOB_EXECUTION=true
ENABLE_DASHBOARD_LOGGING=true

# === Caching ===
CACHE_TTL_MINUTES=5
GEOCODING_CACHE_SIZE=1000
ROUTE_CACHE_SIZE=500
TRUCK_DATA_CACHE_TTL=120

# === Session Management ===
MAX_LIVE_SESSIONS=100
MAX_GROUP_SESSIONS=50
SESSION_TIMEOUT_HOURS=24
AUTO_START_LOCATION_UPDATES=true

# === Data Quality ===
MAX_LOCATION_AGE_HOURS=12
MIN_COORDINATE_PRECISION=0.001
MAX_ROUTE_DISTANCE_MILES=2000

# === Notification Settings ===
SEND_ERROR_NOTIFICATIONS=true
SEND_STATUS_UPDATES=true
NOTIFICATION_COOLDOWN_MINUTES=15
USE_MARKDOWN_MESSAGES=true
ENABLE_MAP_PREVIEWS=true
MAX_MESSAGE_LENGTH=4096

# === Admin Contact ===
ADMIN_USERNAME=your_admin_username
ADMIN_CONTACT_URL=https://t.me/your_admin_username

# === Location Rendering Configuration ===
LOCATION_ADDR_CACHE_TTL_SECS=86400     # 24 hours address cache
RENDER_COORD_DECIMALS=5                 # ~1.1m precision coordinates
REVERSE_GEOCODE_TIMEOUT_SECS=5          # ORS reverse geocode timeout
ENABLE_NEW_LOCATION_RENDERER=true       # Feature flag for new renderer